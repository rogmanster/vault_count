#!/bin/bash

# root
echo namespace: root
vault auth list -format=json | jq -r '.[].type'
echo total: "$(vault auth list -format=json | jq -r '.[].type' | wc -l)"

# namespaces
source namespace.sh $1 | 

authMethods=0
while read NAMESPACE; do 
  echo =========================================
  echo namespace: "$NAMESPACE"
  vault auth list -namespace=$NAMESPACE -format=json | jq -r '.[].type'
  count=$(vault auth list -namespace=$NAMESPACE -format=json | jq -r '.[].type' | wc -l)
  echo total: "$count"
  authMethods+=1
  echo $authMethods
#done
#print (total-count)
